(this.webpackJsonpproduct=this.webpackJsonpproduct||[]).push([[0],{35:function(e,t,c){},36:function(e,t,c){},65:function(e,t,c){},66:function(e,t,c){},67:function(e,t,c){"use strict";c.r(t);var a=c(1),r=c.n(a),n=c(28),s=c.n(n),l=c(2),o=c(3),i=c(11),d=(c(35),c.p+"static/media/spinner.ece48b52.gif"),j=(c(36),c(0)),u=function(){return Object(j.jsx)("div",{className:"loader",children:Object(j.jsx)("img",{src:d,alt:"Loading",className:"horizontal-vertical-middle-align"})})},b=c(10),p=c.n(b),m=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),c=t[0],r=t[1],n=Object(a.useState)(!1),s=Object(l.a)(n,2),i=s[0],d=s[1],b=Object(a.useState)(),m=Object(l.a)(b,2),h=m[0],O=m[1],x=Object(a.useState)(),f=Object(l.a)(x,2),g=f[0],v=f[1],y=Object(a.useState)(),N=Object(l.a)(y,2),S=N[0],w=N[1],C=Object(a.useState)(),D=Object(l.a)(C,2),F=D[0],I=D[1],E=Object(a.useState)(),P=Object(l.a)(E,2),k=P[0],T=P[1],q=Object(a.useState)(),W=Object(l.a)(q,2),M=W[0],V=W[1],U=Object(a.useState)(),Y=Object(l.a)(U,2),L=Y[0],A=Y[1],_=Object(a.useState)(),B=Object(l.a)(_,2),J=B[0],R=B[1],z=Object(o.g)();Object(a.useEffect)((function(){sessionStorage.getItem("email")&&sessionStorage.getItem("name")&&(d(!0),R(sessionStorage.getItem("email")))}),[]);return Object(j.jsxs)(j.Fragment,{children:[c&&Object(j.jsx)(u,{}),!c&&i&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{style:{maxWidth:"700px",margin:"0 20px",marginTop:"30px"},children:"Add Product"}),Object(j.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),!J)return!1;r(!0);var t=new FormData;t.append("name",h),t.append("price",F),t.append("category",k),t.append("manufactureDate",M),t.append("expiryDate",L),t.append("owner",J),t.append("productCode",S),t.append("image",g),p()({method:"post",url:"".concat("http://localhost:4700","/product"),data:t,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log(e),z.push("/products")})).catch((function(e){console.error(e)})).finally((function(){r(!1)})),console.log(g)},method:"POST",style:{maxWidth:"700px",margin:"0 20px"},encType:"multipart/formdata",children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"name",children:"Name"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"name",placeholder:"Enter name",required:!0,onChange:function(e){O(e.target.value)},value:h})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Product Code"}),Object(j.jsx)("input",{type:"number",className:"form-control",placeholder:"Enter code",required:!0,onChange:function(e){w(e.target.value)},value:S})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Product Image"}),Object(j.jsx)("input",{type:"file",onChange:function(e){return v(e.target.files[0])},accept:".png,.jpeg,.jpg",required:!0})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Price"}),Object(j.jsx)("input",{type:"number",className:"form-control",placeholder:"price",onChange:function(e){I(e.target.value)},value:F})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Category"}),Object(j.jsx)("input",{type:"text",className:"form-control",placeholder:"Category",onChange:function(e){T(e.target.value)},value:k})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Manufactured Date"}),Object(j.jsx)("input",{type:"date",className:"form-control",onChange:function(e){V(e.target.value)},value:M})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Expiry Date"}),Object(j.jsx)("input",{type:"date",className:"form-control",onChange:function(e){A(e.target.value)},value:L,min:M||""})]}),Object(j.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})]})]})},h=c(8),O=c.n(h),x=c(12),f=function(){var e=Object(a.useState)(),t=Object(l.a)(e,2),c=t[0],r=t[1],n=Object(a.useState)(),s=Object(l.a)(n,2),i=s[0],d=s[1],b=Object(a.useState)(!1),m=Object(l.a)(b,2),h=m[0],f=m[1],g=Object(o.g)(),v=function(){var e=Object(x.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c&&i){e.next=5;break}return e.abrupt("return",!1);case 5:f(!0),a={email:c,password:i},p.a.post("".concat("http://localhost:4700","/user/login"),a).then((function(e){sessionStorage.setItem("name",a.name),sessionStorage.setItem("email",c),g.push("/products")})).catch((function(e){sessionStorage.clear(),console.error(e)})).finally((function(){f(!1)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[h&&Object(j.jsx)(u,{}),!h&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{style:{maxWidth:"700px",margin:"0 20px"},children:"Login Screen"}),Object(j.jsxs)("form",{onSubmit:v,method:"POST",style:{maxWidth:"700px",margin:"0 20px",marginTop:"30px"},children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(j.jsx)("input",{type:"email",className:"form-control",id:"email",placeholder:"Enter email",required:!0,onChange:function(e){r(e.target.value)},value:c})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"password",children:"Password"}),Object(j.jsx)("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",required:!0,minLength:"5",onChange:function(e){d(e.target.value)},value:i})]}),Object(j.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})]})]})},g=function(e){var t=Object(a.useState)(!1),c=Object(l.a)(t,2),r=c[0],n=c[1],s=parseInt(e.selectedItem.price),i=Object(a.useState)(parseInt(e.selectedItem.price)),d=Object(l.a)(i,2),b=d[0],m=d[1],h=Object(a.useState)(!1),O=Object(l.a)(h,2),x=O[0],f=O[1],g=Object(o.g)();return Object(j.jsxs)(j.Fragment,{children:[r&&Object(j.jsx)(u,{}),!r&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{style:{maxWidth:"700px",margin:"0 20px",marginTop:"30px"},children:"Edit Product"}),x&&Object(j.jsx)("p",{style:{color:"red"},children:"Price can only be changed upto 10%"}),Object(j.jsxs)("form",{onSubmit:function(t){return t.preventDefault(),f(!1),!!b&&(parseInt(b)>1.1*s||parseInt(b)<.9*s?(f(!0),!1):(p.a.put("".concat("http://localhost:4700","/product/").concat(e.selectedItem._id),{price:b}).then((function(e){console.log(e),g.push("/products")})).catch((function(e){console.error(e)})).finally((function(){n(!1)})),void n(!0)))},method:"POST",style:{maxWidth:"700px",margin:"0 20px"},encType:"multipart/formdata",children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"name",children:"Name"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"name",placeholder:"Enter name",required:!0,defaultValue:e.selectedItem.name,disabled:!0})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Product Code"}),Object(j.jsx)("input",{type:"number",className:"form-control",placeholder:"Enter code",required:!0,defaultValue:e.selectedItem.productCode,disabled:!0})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Price"}),Object(j.jsx)("input",{type:"number",className:"form-control",placeholder:"price",onChange:function(e){m(e.target.value)},value:b})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Category"}),Object(j.jsx)("input",{type:"text",className:"form-control",placeholder:"Category",defaultValue:e.selectedItem.category,disabled:!0})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Manufactured Date"}),Object(j.jsx)("input",{type:"date",className:"form-control",defaultValue:e.selectedItem.manufacterDate,disabled:!0})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{children:"Expiry Date"}),Object(j.jsx)("input",{type:"date",className:"form-control",defaultValue:e.selectedItem.expiryDate,disabled:!0})]}),Object(j.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"}),Object(j.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:function(){e.setEditView(!1)},children:"Back"})]})]})]})},v=(c(65),function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),c=t[0],r=t[1],n=Object(a.useState)(),s=Object(l.a)(n,2),o=s[0],i=s[1],d=Object(a.useState)(!1),b=Object(l.a)(d,2),m=b[0],h=b[1],f=Object(a.useState)([]),v=Object(l.a)(f,2),y=v[0],N=v[1],S=Object(a.useState)([]),w=Object(l.a)(S,2),C=w[0],D=w[1],F=Object(a.useState)([]),I=Object(l.a)(F,2),E=I[0],P=I[1],k=Object(a.useState)(),T=Object(l.a)(k,2),q=T[0],W=T[1],M=Object(a.useState)(!1),V=Object(l.a)(M,2),U=V[0],Y=V[1],L=Object(a.useState)(!1),A=Object(l.a)(L,2),_=A[0],B=A[1],J=Object(a.useState)(),R=Object(l.a)(J,2),z=R[0],G=R[1],H=sessionStorage.getItem("email");Object(a.useEffect)((function(){var e=function(){var e=Object(x.a)(O.a.mark((function e(){var t,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,p.a.get("".concat("http://localhost:4700","/product"));case 3:t=e.sent,N(t.data.products),D(t.data.products),t.data.products&&(c=[],t.data.products.forEach((function(e){c.push(e.category.trim())})),P(c)),h(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var K=function(){var e=Object(x.a)(O.a.mark((function e(t){var c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),G(t),e.next=4,p.a.get("".concat("http://localhost:4700","/product/category/").concat(t));case 4:c=e.sent,N(c.data.products),h(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=Object(a.useCallback)((function(e){var t,c;e.owner===H?(t=new Date(e.priceChanged),c=new Date,t.getFullYear()!==c.getFullYear()||t.getMonth()!==c.getMonth()||t.getDate()!==c.getDate()?(i(e),r(!0)):B(!0)):Y(!0)}),[H]),X=function(){var e=Object(x.a)(O.a.mark((function e(t){var c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.owner!==H){e.next=9;break}return h(!0),e.next=4,p.a.delete("".concat("http://localhost:4700","/product/").concat(t._id));case 4:c=y.filter((function(e){return e._id!==t._id})),N(c),h(!1),e.next=10;break;case 9:Y(!0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[m&&Object(j.jsx)(u,{}),!m&&!c&&Object(j.jsxs)("div",{className:"col-12 product-wrpapper",children:[Object(j.jsxs)("div",{className:"input-group col-12 search-wrapper",children:[Object(j.jsx)("div",{className:"form-outline",children:Object(j.jsx)("input",{type:"search",id:"form1",className:"form-control",value:q,onChange:function(e){W(e.target.value)}})}),Object(j.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:function(){if(""===q)return N(C),!1;var e=y.filter((function(e){return e.name.includes(q)||e.category.includes(q)}));N(e)},children:[Object(j.jsx)("i",{className:"fa fa-search"}),"Search"]})]}),Object(j.jsx)("div",{className:"col-12 filter-wrapper",children:E.map((function(e,t){return Object(j.jsxs)("div",{children:[Object(j.jsx)("input",{type:"radio",name:"filter",id:t,checked:e===z,onChange:function(){},onClick:function(){K(e)}}),Object(j.jsx)("label",{htmlFor:t,children:e})]},t)}))}),U&&Object(j.jsx)("p",{className:"error",style:{color:"red"},children:"You do not have priviledge to edit or delete the product."}),_&&Object(j.jsx)("p",{className:"error",style:{color:"red"},children:"You can not edit same product twice in the same day."}),Object(j.jsx)("div",{className:"col-12 products-view row",children:y&&y.map((function(e,t){return Object(j.jsxs)("div",{className:"card col-md-4",children:[Object(j.jsx)("img",{className:"card-img-top",src:"".concat("http://localhost:4700").concat(e.image),alt:"product-img"}),Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h5",{className:"card-title",children:e.name}),Object(j.jsx)("p",{className:"card-text",children:e.productCode}),Object(j.jsx)("p",{className:"card-text",children:e.price}),Object(j.jsx)("p",{className:"card-text",children:e.category}),Object(j.jsx)("p",{className:"card-text",children:new Date(e.expiryDate).getUTCDay()+"/"+new Date(e.expiryDate).getUTCMonth()+"/"+new Date(e.expiryDate).getUTCFullYear()}),Object(j.jsx)("p",{className:"card-text",children:new Date(e.expiryDate).getUTCDay()+"/"+new Date(e.expiryDate).getUTCMonth()+"/"+new Date(e.expiryDate).getUTCFullYear()}),Object(j.jsx)("button",{type:"btn",className:"btn btn-info",onClick:function(){return Q(e)},children:"Edit"}),Object(j.jsx)("button",{type:"btn",className:"btn btn-danger",onClick:function(){return X(e)},children:"delete"})]})]},t)}))})]}),!m&&c&&Object(j.jsx)(g,{setEditView:r,selectedItem:o,setSelectedItem:i})]})}),y=function(){var e=Object(a.useState)(),t=Object(l.a)(e,2),c=t[0],r=t[1],n=Object(a.useState)(),s=Object(l.a)(n,2),i=s[0],d=s[1],b=Object(a.useState)(),m=Object(l.a)(b,2),h=m[0],f=m[1],g=Object(a.useState)(!1),v=Object(l.a)(g,2),y=v[0],N=v[1],S=Object(o.g)(),w=function(){var e=Object(x.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c&&i&&h){e.next=5;break}return e.abrupt("return",!1);case 5:N(!0),a={name:c,email:i,password:h},p.a.post("".concat("http://localhost:4700","/user/register"),a).then((function(e){return S.push("/login")})).catch((function(e){console.error(e)})).finally((function(){N(!1)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[y&&Object(j.jsx)(u,{}),!y&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{style:{maxWidth:"700px",margin:"0 20px",marginTop:"30px"},children:"Register Screen"}),Object(j.jsxs)("form",{onSubmit:w,method:"POST",style:{maxWidth:"700px",margin:"0 20px"},children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"name",children:"Full Name"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"name",placeholder:"Enter name",required:!0,onChange:function(e){r(e.target.value)},value:c})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(j.jsx)("input",{type:"email",className:"form-control",id:"email",placeholder:"Enter email",required:!0,onChange:function(e){d(e.target.value)},value:i})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{htmlFor:"password",children:"Password"}),Object(j.jsx)("input",{type:"password",className:"form-control",id:"password",placeholder:"Password",required:!0,minLength:"5",onChange:function(e){f(e.target.value)},value:h})]}),Object(j.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})]})]})},N=(c(66),function(e){return Object(j.jsx)(r.a.Fragment,{children:Object(j.jsxs)("header",{className:"col-12 row header",children:[Object(j.jsx)("div",{className:"col-md-3 title",children:Object(j.jsx)("h3",{children:"Product App"})}),Object(j.jsx)("div",{className:"col-md-2",children:Object(j.jsx)(i.b,{to:"/login",children:"Login"})}),Object(j.jsx)("div",{className:"col-md-2",children:Object(j.jsx)(i.b,{to:"/register",children:"Register"})}),Object(j.jsx)("div",{className:"col-md-2",children:Object(j.jsx)(i.b,{to:"/products",children:"Products"})}),Object(j.jsx)("div",{className:"col-md-3",children:Object(j.jsx)(i.b,{to:"/add-product",children:"Add Product"})})]})})});var S=function(){var e=Object(a.createContext)(),t=Object(a.useState)(""),c=Object(l.a)(t,2),r=c[0],n=c[1],s=Object(a.useState)(""),d=Object(l.a)(s,2),u=d[0],b=d[1],p={email:r,name:u,updateEmail:function(e){n(e)},updateName:function(e){b(e)}},h=Object(j.jsxs)(o.d,{children:[Object(j.jsx)(o.b,{path:"/products",exact:!0,children:Object(j.jsx)(v,{})}),Object(j.jsx)(o.b,{path:"/register",exact:!0,children:Object(j.jsx)(y,{})}),Object(j.jsx)(o.b,{path:"/add-product",exact:!0,children:Object(j.jsx)(m,{})}),Object(j.jsx)(o.b,{path:"/login",exact:!0,children:Object(j.jsx)(f,{})}),Object(j.jsx)(o.a,{to:"/login",exact:!0})]});return Object(j.jsx)(e.Provider,{value:p,children:Object(j.jsxs)(i.a,{children:[Object(j.jsx)("div",{className:"col-12",children:Object(j.jsx)(N,{})}),Object(j.jsx)("div",{className:"App",children:h})]})})};s.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(S,{})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.9adc98f1.chunk.js.map